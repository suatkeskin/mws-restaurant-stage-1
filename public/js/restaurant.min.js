"use strict";var restaurant=void 0,map=void 0;document.addEventListener("DOMContentLoaded",function(){fetchRestaurantFromURL()}),window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:restaurant.latlng,scrollwheel:!1}),google.maps.event.addListener(self.map,"tilesloaded",function(){document.querySelectorAll("#map iframe").forEach(function(e){e.setAttribute("title","Google Maps")}),document.querySelectorAll("#map *").forEach(function(e){e.setAttribute("tabindex","-1")}),document.querySelectorAll('#map [rel="noopener"]').forEach(function(e){e.removeAttribute("rel")})}),showMap(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map)};var fetchRestaurantFromURL=function(){if(self.restaurant)fillBreadcrumb();else{var e=getParameterByName("id");e&&DBHelper.fetchRestaurants(e,function(e,t){e||(self.restaurant=t,fillRestaurantHTML(),fillBreadcrumb())})}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img-webp-src");t.type="image/webp",t.srcset=DBHelper.webpSrcsetForRestaurant(e);var r=document.getElementById("restaurant-img-jpg-src");r.type="image/jpeg",r.srcset=DBHelper.imageSrcsetForRestaurant(e);var n=DBHelper.imageUrlForRestaurant(e);if(n){var a=document.getElementById("restaurant-img");a.className="restaurant-img",a.src=n,a.srcset=DBHelper.imageSrcsetForRestaurant(e),a.sizes="100vw",a.alt="Image of restaurant "+e.name}else document.getElementById("restaurant-picture").remove();document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var r in e){var n=e[r].split(",");for(var a in n)addRestaurantHoursHTML(t,"0"===a?r:"",n[a])}},addRestaurantHoursHTML=function(e,t,r){var n=document.createElement("tr"),a=document.createElement("td");a.innerHTML=t,n.appendChild(a);var i=document.createElement("td");i.innerHTML=r,n.appendChild(i),e.appendChild(n)},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),r=document.createElement("h4");if(r.innerHTML="Reviews",t.appendChild(r),!e){var n=document.createElement("p");return n.innerHTML="No reviews yet!",void t.appendChild(n)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),t.appendChild(a)},createReviewHTML=function(e){var t=document.createElement("li"),r=document.createElement("p");r.innerHTML=e.comments,t.appendChild(r);var n=document.createElement("strong");n.innerHTML=e.name;var a=document.createElement("h5");a.appendChild(n),t.appendChild(a);var i=document.createElement("p");i.classList.add("date"),i.innerHTML=e.date,t.appendChild(i);var l=document.createElement("div");return l.classList.add("rating"),l.classList.add("rating-"+e.rating),t.appendChild(l),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),r=document.createElement("a");r.innerHTML=e.name,r.href="restaurant.html?id="+e.id,r.setAttribute("aria-current","page");var n=document.createElement("li");n.appendChild(r),t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null};
"use strict";var restaurants=void 0,map=void 0,markers=[],lazyImageObserver=void 0;"IntersectionObserver"in window&&(lazyImageObserver=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target;"SOURCE"!==t.nodeName&&(t.src=t.dataset.src),t.srcset=t.dataset.srcset,t.classList.remove("lazy"),lazyImageObserver.unobserve(t)}})})),window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),google.maps.event.addListener(self.map,"tilesloaded",function(){document.querySelectorAll("#map iframe").forEach(function(e){e.setAttribute("title","Google Maps")}),document.querySelectorAll("#map *").forEach(function(e){e.setAttribute("tabindex","-1")}),document.querySelectorAll('#map [rel="noopener"]').forEach(function(e){e.removeAttribute("rel")})}),addMarkersToMap()};var updateRestaurants=function(a,r,n,d){DBHelper.fetchRestaurantByCuisineAndNeighborhood(n.value,r.value,function(e,t){e||(resetRestaurants(a,t),fillRestaurantsHTML(a),fillNeighborhoodsHTML(r,t),fillCuisinesHTML(n,t),d())})},resetRestaurants=function(e,t){self.restaurants=[],e.innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=t},fillRestaurantsHTML=function(t){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:self.restaurants).forEach(function(e){t.append(createRestaurantHTML(e))})},createRestaurantHTML=function(e){var t=void 0,a=DBHelper.imageUrlForRestaurant(e);if(a){var r=document.createElement("source");r.className="lazy-image",r.type="image/webp",r.srcset="",r.setAttribute("data-srcset",DBHelper.webpSrcsetForRestaurant(e));var n=document.createElement("source");n.className="lazy-image",n.type="image/jpeg",n.srcset="",n.setAttribute("data-srcset",DBHelper.imageSrcsetForRestaurant(e));var d=document.createElement("img");d.className="restaurant-img lazy-image",d.setAttribute("data-src",a),d.setAttribute("data-srcset",DBHelper.imageSrcsetForRestaurant(e)),d.sizes="100vw",d.alt="Image of restaurant "+e.name,(t=document.createElement("picture")).appendChild(r),t.appendChild(n),t.appendChild(d),lazyImageObserver&&(lazyImageObserver.observe(r),lazyImageObserver.observe(n),lazyImageObserver.observe(d))}var c=document.createElement("div");c.className="mdc-card__media mdc-card__media--square",t&&c.append(t);var l=document.createElement("h2");l.className="mdc-card__title mdc-typography--headline2",l.innerHTML=e.name;var i=document.createElement("h3");i.className="mdc-card__subtitle mdc-typography--subtitle1",i.innerHTML=e.neighborhood;var s=document.createElement("div");s.className="mdc-card__primary",s.append(l),s.append(i);var o=document.createElement("div");o.className="mdc-card__secondary mdc-typography--body1",o.innerHTML=e.address;var m=document.createElement("div");m.className="mdc-card__primary-action mdc-ripple-upgraded",m.append(c),m.append(s),m.append(o);var u=document.createElement("div");u.className="mdc-card__action-buttons";var p=document.createElement("a");p.className="mdc-button mdc-card__action mdc-card__action--button mdc-ripple-upgraded",p.innerHTML="View Details",p.href=DBHelper.urlForRestaurant(e),u.append(p);var v=document.createElement("i");v.className="mdc-favorite-icons mdc-icon-toggle material-icons mdc-card__action mdc-card__action--icon mdc-ripple-upgraded mdc-ripple-upgraded--unbounded",v.innerHTML="favorite_border",v.setAttribute("tabindex",0),v.setAttribute("role","button"),v.setAttribute("aria-pressed",e.is_favorite),v.setAttribute("aria-label","Add to favorites"),v.setAttribute("title","Add to favorites"),v.setAttribute("data-toggle-on",'{"content": "favorite", "label": "Remove from favorites"}'),v.setAttribute("data-toggle-off",'{"content": "favorite_border", "label": "Add to favorites"}'),v.setAttribute("restaurant-id",e.id),MDCIconToggle.attachTo(v),v.addEventListener("MDCIconToggle:change",function(e){var t=e.target||e.srcElement,a=t.getAttribute("restaurant-id");"true"===t.getAttribute("aria-pressed")?DBHelper.favoritesRestaurant(a):DBHelper.unFavoritesRestaurant(a)});var g=document.createElement("div");g.className="mdc-card__action-icons",g.append(v);var f=document.createElement("div");f.className="mdc-card__actions",f.append(u),f.append(g);var h=document.createElement("div");return h.className="mdc-card mdc-layout-grid__cell mdc-layout-grid__cell--span-4",h.append(m),h.append(f),h},fillNeighborhoodsHTML=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.getElementById("neighborhoods-select"),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:self.restaurants,n=a.map(function(e,t){return a[t].neighborhood});n.filter(function(e,t){return n.indexOf(e)===t}).forEach(function(e){var t=e.replace(/ /g,"");if(!r.namedItem(t)){var a=document.createElement("option");a.innerHTML=e,a.value=e,a.id=t,r.append(a)}})},fillCuisinesHTML=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.getElementById("cuisines-select"),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:self.restaurants,n=a.map(function(e,t){return a[t].cuisine_type});n.filter(function(e,t){return n.indexOf(e)===t}).forEach(function(e){var t=e.replace(/ /g,"");if(!r.namedItem(t)){var a=document.createElement("option");a.innerHTML=e,a.value=e,a.id=t,r.append(a)}})},addMarkersToMap=function(){document.getElementById("map").classList.contains("hidden")||self.restaurants.forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers.push(t)})};!function(){var e=document.createElement("select");e.className="mdc-select__native-control",e.id="neighborhoods-select",e.innerHTML='<option value="All Neighborhoods" selected>All Neighborhoods</option>',e.setAttribute("aria-labelledby","neighborhood-label");var t=document.createElement("label");t.className="mdc-floating-label",t.id="neighborhood-label",t.innerHTML="Choose a neighborhood";var a=document.createElement("div");a.className="mdc-line-ripple";var r=document.createElement("div");r.className="mdc-select mdc-select--box mdc-ripple-upgraded",r.appendChild(e),r.appendChild(t),r.appendChild(a);var n=document.createElement("div");n.className="mdc-layout-grid__cell mdc-layout-grid__cell--span-3",n.appendChild(r);var d=document.createElement("select");d.className="mdc-select__native-control",d.id="cuisines-select",d.innerHTML='<option value="All Cuisines" selected>All Cuisines</option>',d.setAttribute("aria-labelledby","cuisine-label");var c=document.createElement("label");c.className="mdc-floating-label",c.id="cuisine-label",c.innerHTML="Choose a neighborhood";var l=document.createElement("div");l.className="mdc-line-ripple";var i=document.createElement("div");i.className="mdc-select mdc-select--box mdc-ripple-upgraded",i.appendChild(d),i.appendChild(c),i.appendChild(l);var s=document.createElement("div");s.className="mdc-layout-grid__cell mdc-layout-grid__cell--span-3",s.appendChild(i);var o=document.createElement("h6");o.className="mdc-typography--headline6",o.innerHTML="Filter Results";var m=document.createElement("div");m.className="mdc-layout-grid__cell mdc-layout-grid__cell--span-4",m.appendChild(o);var u=document.createElement("div");u.className="mdc-layout-grid__inner",u.appendChild(m),u.appendChild(n),u.appendChild(s);var p=document.createElement("div");p.className="mdc-layout-grid filter-container",p.id="filters",p.setAttribute("tabindex",-1),p.appendChild(u),new MDCFloatingLabel(t),new MDCFloatingLabel(c),new MDCSelect(r).listen("change",updateRestaurants),new MDCSelect(i).listen("change",updateRestaurants);var v=document.createElement("div");v.className="mdc-layout-grid__inner",v.id="restaurants-list";var g=document.createElement("div");g.className="restaurants-list-container mdc-layout-grid",g.appendChild(v);var f=document.createElement("div");f.id="restaurant-container",f.appendChild(g),updateRestaurants(v,e,d,function(){var e=document.getElementById("maincontent");e.removeChild(document.getElementById("progressbar")),e.appendChild(p),e.appendChild(f),document.getElementById("show-map").addEventListener("click",showHideMap)})}();